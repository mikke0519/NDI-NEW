<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ET-2問題集 インタラクティブ学習</title>
  <style>
    :root {
      --primary: #2563eb;
      --primary-light: #3b82f6;
      --correct: #22c55e;
      --incorrect: #ef4444;
      --explanation-bg: #f1f5f9;
      --container-bg: #fff;
      --shadow: 0 4px 24px rgba(0,0,0,0.08);
      --radius: 1.2rem;
      --transition: 0.3s cubic-bezier(.4,2,.6,1);
      --font: "Segoe UI", "Meiryo", "Hiragino Kaku Gothic ProN", Arial, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #e0e7ff 0%, #f1f5f9 100%);
      min-height: 100vh;
      margin: 0;
      font-family: var(--font);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #quiz-container {
      background: var(--container-bg);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 2rem 1.5rem 1.5rem 1.5rem;
      max-width: 480px;
      width: 100%;
      margin: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    #progress-text {
      font-size: 1.1rem;
      color: var(--primary);
      font-weight: 600;
      letter-spacing: 0.05em;
      text-align: right;
    }
    #question-container {
      display: flex;
      align-items: flex-start;
      gap: 0.7rem;
    }
    #question-text {
      font-size: 1.2rem;
      font-weight: 500;
      margin: 0;
      flex: 1;
      line-height: 1.6;
    }
    #speak-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--primary-light);
      transition: color var(--transition);
      margin-top: 0.2em;
      padding: 0.2em 0.4em;
      border-radius: 50%;
    }
    #speak-button:hover {
      color: var(--primary);
      background: #e0e7ff;
    }
    #choices-container {
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      margin-top: 0.5rem;
    }

    /* 横幅が十分ある場合は2列レイアウトに */
    @media (min-width: 600px) {
      #choices-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }
    }

    .choice-btn {
      font-size: 1.08rem;
      padding: 0.9em 1em;
      border: 2px solid #e5e7eb;
      border-radius: 0.7em;
      background: #f8fafc;
      color: #222;
      cursor: pointer;
      transition: background var(--transition), color var(--transition), border var(--transition);
      text-align: left;
      outline: none;
      font-family: inherit;
      font-weight: 500;
    }
    .choice-btn:hover:not(:disabled) {
      background: var(--primary-light);
      color: #fff;
      border-color: var(--primary-light);
    }
    .choice-btn:disabled {
      cursor: not-allowed;
      opacity: 0.8;
    }
    .choice-btn.correct {
      background: var(--correct);
      color: #fff;
      border-color: var(--correct);
      animation: pop 0.25s;
    }
    .choice-btn.incorrect {
      background: var(--incorrect);
      color: #fff;
      border-color: var(--incorrect);
      animation: shake 0.25s;
    }
    @keyframes pop {
      0% { transform: scale(1); }
      60% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-4px); }
      100% { transform: translateX(0); }
    }
    #explanation-container {
      background: var(--explanation-bg);
      border-radius: 0.7em;
      margin-top: 0.8em;
      padding: 1em 1em 0.9em 1em;
      color: #222;
      font-size: 1.05rem;
      line-height: 1.7;
      box-shadow: 0 2px 10px rgba(37,99,235,0.04);
      opacity: 0;
      transform: translateY(30px);
      pointer-events: none;
      transition: opacity 0.6s var(--transition), transform 0.6s var(--transition);
      display: none;
    }
    #explanation-container.visible {
      display: block;
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
    #navigation-container {
      display: flex;
      justify-content: space-between;
      gap: 1.2em;
      margin-top: 1.2em;
    }
    #prev-button, #next-button {
      flex: 1;
      font-size: 1.07rem;
      padding: 0.7em 1em;
      border: none;
      border-radius: 0.7em;
      background: var(--primary-light);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background var(--transition), box-shadow var(--transition);
      box-shadow: 0 2px 8px rgba(37,99,235,0.05);
    }
    #prev-button:hover, #next-button:hover {
      background: var(--primary);
    }
    @media (max-width: 600px) {
      #quiz-container {
        max-width: 98vw;
        padding: 1.2rem 0.3rem 1rem 0.3rem;
        margin: 0.5rem;
      }
      #question-text {
        font-size: 1.08rem;
      }
      .choice-btn {
        font-size: 0.99rem;
        padding: 0.8em 0.7em;
      }
      #explanation-container {
        font-size: 0.98rem;
        padding: 0.7em 0.7em 0.7em 0.7em;
      }
      #prev-button, #next-button {
        font-size: 1rem;
        padding: 0.6em 0.3em;
      }
    }

    /* ---------- Tablet (<=900px) ---------- */
    @media (max-width: 900px) {
      #quiz-container { max-width: 92vw; }
      #question-text  { font-size: 1.1rem; }
      .choice-btn     { font-size: 1.02rem; }
    }

    /* ---------- Small phones (<=450px) ---------- */
    @media (max-width: 450px) {
      #navigation-container { flex-direction: column; }
      #navigation-container button { width: 100%; }

      /* スマホ縦持ちでも読みやすいレイアウト */
      #question-container {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }
      #question-text {
        white-space: normal;
        overflow: visible;
        line-height: 1.6;
      }
      #speak-button, #pause-button {
        align-self: flex-end;
      }

      .chapter-buttons {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 0.3rem;
      }
      .chapter-buttons button {
        min-width: 5rem;
        margin-right: 0.3rem;
      }
    }
  </style>
</head>
<body>
  <h1>ＮＤＩ学習ツール</h1>
  <div class="chapter-buttons" style="margin-bottom: 1em;">
    <button id="chapter1-btn">第一章</button>
    <button id="chapter2-btn">第二章</button>
    <button id="chapter3-btn">第三章</button>
  </div>
  <div id="quiz-container">
    <div id="progress-text"></div>
    <div id="question-container">
      <p id="question-text"></p>
      <button id="speak-button" title="読み上げ"><span aria-label="読み上げ">🔊</span></button>
      <button id="pause-button" title="一時停止"><span aria-label="一時停止">⏸️</span></button>
    </div>
    <div id="choices-container"></div>
    <div id="explanation-container"></div>
    <div id="navigation-container">
      <button id="prev-button">前へ</button>
      <button id="next-button">次へ</button>
    </div>
  </div>
  <script>
    // --- 問題データ ---
    let quizData = [

      {id:"1.1",question:"1.1~次の文は、渦電流探傷試験を適用する試験体について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["強磁性体でなければならない。","非磁性体でなければならない。","導体でなければならない。","絶縁体でなければならない。"],correct_option_index:2,explanation:"渦電流探傷試験は、電磁誘導現象を利用して導体内に渦電流を発生させる手法です。そのため、試験対象は電気を通す導体である必要があります。"},
      {id:"1.2",question:"1.2~次の文は、渦電流探傷試験において試験体に誘導される渦電流について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["コイルの熱の作用によって誘導される。","コイルの磁束の作用によって誘導される。","コイルの表皮効果によって試験体に誘導される。","コイルの端末効果によって試験体に誘導される。"],correct_option_index:1,explanation:"試験コイルに交流を流すと時間的に変化する磁束が発生します。この交流磁束が導体を貫くことで、磁束の変化を打ち消す向きに渦電流が誘導されます。これを電磁誘導現象といいます。"},
      {id:"1.3",question:"1.3~渦電流探傷試験は、次に示すいずれの作用を利用しているか。正しいものを一つ選び、記号で答えなさい。",choices:["光電効果","静電誘導現象","電磁誘導現象","圧電効果"],correct_option_index:2,explanation:"渦電流探傷試験の原理は、ファラデーの電磁誘導の法則に基づいています。"},
      {id:"1.4",question:"1.4~渦電流探傷試験は何のエネルギーを利用しているか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["静電エネルギー","音響エネルギー","電磁気エネルギー","光エネルギー"],correct_option_index:2,explanation:"コイルが作る磁界と、それによって導体に流れる渦電流は電磁気的な現象であり、利用しているのは電磁気エネルギーです。"},
      {id:"1.5",question:"1.5~渦電流探傷試験に最も関係の深いものは、次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["漏れ磁束","熱電子","渦電流","磁気ひずみ"],correct_option_index:2,explanation:"渦電流探傷試験は、試験体に誘導した「渦電流」の変化を捉えることで、きずの検出や材質評価を行います。"},
      {id:"1.6",question:"1.6~次の文は、渦電流探傷試験の原理について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験コイルに直流を流すと、試験体内に渦電流が誘導されることを利用する。","試験体表面のきずによって、渦電流の流れが変化することを利用する。","渦電流の周波数が、きずによって変化することを利用する。","試験体表面のきずの部分が磁気飽和することを利用する。"],correct_option_index:1,explanation:"電磁誘導で発生した渦電流は、きず（不連続部）があると流れが妨げられて変化します。この渦電流の変化をコイルのインピーダンス変化として捉えるのが渦電流探傷試験の原理です。"},
      {id:"1.7",question:"1.7 次の文は、渦電流探傷試験の原理について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["電磁誘導現象を利用している。","静電誘導現象を利用している。","速度効果を利用している。","端末効果を利用している。"],correct_option_index:0,explanation:"渦電流探傷試験の基本原理は、ファラデーの電磁誘導の法則に基づいています。"},
      {id:"1.8",question:"1.8~渦電流が誘導されない材料は、次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["ジュラルミン","銅","鋼","ベークライト"],correct_option_index:3,explanation:"渦電流は導体に誘導される電流です。ベークライトは電気を通さない絶縁体なので、渦電流は誘導されません。"},
      {id:"1.9",question:"1.9 渦電流探傷試験の指示に影響を与えないものは、次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["周波数","透磁率","誘電率","充填率"],correct_option_index:2,explanation:"渦電流探傷試験の指示は、周波数、透磁率、導電率、充填率、リフトオフ、形状・寸法などの影響を受けます。誘電率は主にコンデンサの性質に関わるもので、渦電流探傷には直接影響しません。"},
      {id:"1.10",question:"1.10~次に示す試験体の特性のうち、渦電流探傷試験に影響を及ぼすものはどれか。正しいものを一つ選び、記号で答えなさい。",choices:["誘電率","導電率","密度","比熱"],correct_option_index:1,explanation:"渦電流の発生量や流れ方は、試験体の導電率と透磁率に大きく影響されます。他の選択肢は直接的な影響を与えません。"},
      {id:"1.11",question:"1.11 貫通プローブによる渦電流探傷試験に適している試験体は、次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["タービンブレード","クランクシャフト","ピアノ線（鋼）","アルミニウム薄板"],correct_option_index:2,explanation:"貫通プローブは、線材や管材のような長尺で断面形状が一定の試験体の検査に適しています。ピアノ線がこれに該当します。"},
      {id:"1.12",question:"1.12 次の文は、電磁誘導試験の適用について述べたものである。最も適切なものを一つ選び、記号で答えなさい。",choices:["鋳鋼内部のひけ巣の検出","銅合金の導電率変化の検出","普通鋼とSUS430のクラッド材のクラッド厚さ測定","銅板上の銅メッキ層厚さの測定"],correct_option_index:1,explanation:"電磁誘導試験は、材質の違いによる導電率や透磁率の変化を検出できます。銅合金の導電率変化の検出は代表的な適用例です。鋳鋼内部の検出や、母材と皮膜の導電率が同じメッキ厚測定は困難です。"},
      {id:"1.13",question:"1.13 渦電流探傷試験の適用によって検出されるきずは、次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["強化プラスチックの表面割れ","非鉄金属丸棒の表面割れ","セラミックスの表面割れ","厚鋼板溶接部の深部にある割れ"],correct_option_index:1,explanation:"渦電流探傷試験は導体の表面きずの検出に適しています。非鉄金属丸棒は導体であり、その表面割れは検出対象です。プラスチックやセラミックスは絶縁体、鋼板の深部のきずは表皮効果により検出困難です。"},
      {id:"1.14",question:"1.14 次の文は、渦電流探傷試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["セラミックスの割れの検査に適用できる。","コンクリートの割れの検査に適用できる。","テフロン管の割れの検査に適用できる。","銅合金管の割れの検査に適用できる。"],correct_option_index:3,explanation:"渦電流探傷試験は導体にのみ適用可能です。銅合金管は導体なので適用できますが、セラミックス、コンクリート、テフロン管は絶縁体なので適用できません。"},
      {id:"1.15",question:"1.15~次の文は、渦電流探傷試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["鋼材の深いきずの検出はできない。","セラミック材料のきずの検出ができる。","材料の非導電性被膜厚さの測定はできない。","肉厚の測定はできない。"],correct_option_index:0,explanation:"渦電流は表皮効果により試験体の表面近くに集中して流れるため、表面から深い位置にあるきずの検出は困難です。"},
      {id:"1.16",question:"1.16 渦電流探傷試験を適用することが不適切なものは次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["黄銅管","チタン管","テフロン管","ステンレス鋼管"],correct_option_index:2,explanation:"テフロン管は電気を通さない絶縁体なので、渦電流探傷試験は適用できません。他の金属管はすべて導体です。"},
      {id:"1.17",question:"1.17 次の文は、渦電流試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["非磁性体金属の表面きずの検出には、適用できない。","強磁性体金属の表面きずの検出には、適用できない。","磁気特性の違いを検出すれば、側の材質判別に適用できる。","試験コイルのインピーダンス変化は、探傷試験に限って利用される。"],correct_option_index:2,explanation:"渦電流試験は、きずだけでなく、材質（導電率や透磁率）の違いも検出できます。これにより、鋼材などの材質判別にも応用されます。"},
      {id:"1.18",question:"1.18 電磁誘導試験を適用することが不適切なものはどれか。次のうちから適切なものを一つ選び、記号で答えなさい。",choices:["鋼溶接部の溶込み不足の検出","アルミニウム合金の導電率の測定","鋼材の焼入れの有無の測定","銅合金板上のテフロン被膜の測定"],correct_option_index:0,explanation:"溶込み不足は溶接部の内部の欠陥であり、表皮効果のため渦電流探傷試験での検出は非常に困難です。他の選択肢はすべて電磁誘導試験の代表的な適用例です。"},
      {id:"1.19",question:"1.19 次の文は、渦電流探傷試験の適用について述べたものである。次のうちから最も適切なものを一つ選び、記号で答えなさい。",choices:["複雑な形状の試験体の保守検査に適する。","厚い金属板の裏面における腐食の検出に適する。","金属の管や棒などの製品検査に適する。","永盛りのある溶接部の表面検査に適する。"],correct_option_index:2,explanation:"渦電流探傷試験は高速で自動化が容易なため、管や棒のような断面形状が一定な製品の製造ラインにおける連続検査に非常に適しています。"},
      {id:"1.20",question:"次の文は、渦電流探傷試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["溶接部の内部欠陥の検出に広く用いられている。","表面におけるきずの検出はできない。","非導電性皮膜の厚さ測定ができる。","セラミックスの探傷に広く用いられている。"],correct_option_index:2,explanation:"導体上の非導電性皮膜（塗装など）の厚さが変わると、コイルと導体との距離（リフトオフ）が変化するため、コイルのインピーダンスが変化します。これを利用して皮膜の厚さを測定することができます。"},

      {id:"1.21",question:"1.21 次の文は、電磁誘導試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["ファラデー効果を利用して材質試験ができる。","リフトオフ効果を利用して導体上の非導電性の膜厚測定ができる。","端末効果を利用して試験体端部の探傷ができる。","速度効果を利用すれば高速度で探傷試験ができる。"],correct_option_index:1,explanation:"リフトオフ効果とは、コイルと導体との距離が変化するとコイルのインピーダンスが変化する現象です。導体上の非導電性膜は、その厚さ分だけコイルを導体から離すため、この効果を利用して膜厚を測定できます。"},
      {id:"1.22",question:"1.22 電磁誘導試験において、リフトオフ効果が利用されているのはどれか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["強磁性金属上の非導電性膜の厚さ測定","非磁性体の材質判別","強磁性体の材質判別","非磁性金属上の非導電性膜の厚さ測定"],correct_option_index:3,explanation:"リフトオフ効果の最も代表的な応用例は、非磁性導体（アルミニウムなど）の上の非導電性被膜（塗装やアルマイトなど）の厚さ測定です。"},
      {id:"1.23",question:"1.23 電磁誘導試験による非磁性体の材質試験において、測定される物性は次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["透磁率","導電率（抵抗率）","初透磁率","誘電率"],correct_option_index:1,explanation:"非磁性体の透磁率はほぼ真空の透磁率と等しく、材質による変化はほとんどありません。したがって、非磁性体の材質試験では、材質によって異なる導電率（またはその逆数である抵抗率）の変化を測定します。"},
      {id:"1.24",question:"1.24 次の文は、電磁誘導試験の適用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["金属表面の非導電性膜厚測定では、渦電流が試験体の導電率や透磁率によって異なることを利用している。","材質試験では、渦電流がリフトオフによって変化することを利用している。","探傷試験では、試験体表面の不連続部が渦電流を変化させることを利用している。","非磁性材料の材質試験では、透磁率によって渦電流が変化することを利用している。"],correct_option_index:2,explanation:"探傷試験の基本原理は、きずのような不連続部が渦電流の流れを妨げ、その結果生じるインピーダンス変化を検出することです。"},
      {id:"1.25",question:"1.25 次の文は、渦電流探傷試験の長所について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験体内部のきずが検出できる。","非導電体の探傷試験ができる。","非接触で探傷試験ができる。","きずの形状が検出できる。"],correct_option_index:2,explanation:"渦電流探傷試験の大きな長所の一つは、試験コイルを試験体に接触させる必要がないことです。磁束は空間を伝わって導体に到達するため、非接触での検査が可能です。"},
      {id:"1.26",question:"1.26 次の文は、渦電流探傷試験の特徴について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["導電性の試験体内部の深い位置にあるきずの検出に適する。","非磁性体はもちろん、強磁性体の金属の探傷試験にも適用できる。","試験プローブは試験体に接触する必要がある。","薄肉の金属管の探傷試験には適さない。"],correct_option_index:1,explanation:"渦電流探傷試験は、非磁性体だけでなく、直流磁化を併用するなどの工夫により強磁性体の探傷にも広く適用されています。"},
      {id:"1.27",question:"1.27 渦電流探傷試験の特徴について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["非磁性体についてのみ、表面きずの検出ができる。","非導電性材料の表面きずの検出に適する。","金属の表面きずの検出に適する。","試験体の形状に関係せず表面きずが検出できる。"],correct_option_index:2,explanation:"渦電流探傷試験は、導電性を持つ金属材料の表面および表面近傍のきずの検出に非常に適しています。"},
      {id:"1.28",question:"1.28 次の文は、渦電流探傷試験の特徴を述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験プローブを試験体に接触しなければならない。","試験の指示が電気信号として得られるので、探傷システムの自動化に適する。","試験結果の記録の保存が容易でない。","試験指示からきずの形状を知ることができる。"],correct_option_index:1,explanation:"試験結果が電気信号としてリアルタイムで得られるため、記録装置への保存や、良否判定の自動化が容易です。"},
      {id:"1.29",question:"1.29 次の文は、渦電流探傷試験の特徴について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験体内部のきずの検出に適している。","試験の自動化に適している。","強磁性体にだけ適用できる。","複雑な形状の試験体の探傷に適する。"],correct_option_index:1,explanation:"渦電流探傷試験は、検査結果が電気信号として高速で得られるため、製造ラインでの連続検査など、試験の自動化に非常に適しています。"},
      {id:"1.30",question:"1.30 次の文は、渦電流探傷試験の特徴について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["導電性の試験体に非接触で探傷ができる。","厚い板状の導体内部の探傷に適する。","セラミック板の割れの探傷ができる。","厚肉鋼管の内側から外面きずが探傷できる。"],correct_option_index:0,explanation:"渦電流探傷試験の大きな長所は、導電性の試験体であれば、プローブを接触させることなく検査ができる点です。"},
      {id:"1.31",question:"1.31 次の文は、渦電流探傷試験の短所について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験が低速度である。","表面におけるきずの検出が困難である。","試験体の深い位置にあるきずの検出が困難である。","非磁性体しか探傷試験できない。"],correct_option_index:2,explanation:"渦電流探傷試験の最も代表的な短所は、表皮効果により、渦電流が試験体の表面近くにしか流れないため、内部の深い位置にあるきずの検出が困難であることです。"},
      {id:"1.32",question:"1.32 次の文は、渦電流探傷試験の特徴について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験プローブを試験体に接触しなければならない。","試験の指示が電気信号として得られるので、探傷システムの自動化に適する。","試験結果の記録の保存が容易でない。","試験指示からきずの形状を知ることができる。"],correct_option_index:1,explanation:"試験結果が電気信号としてリアルタイムで得られるため、記録装置への保存や、良否判定の自動化が容易です。"},
      {id:"1.33",question:"1.33 次の文は、渦電流探傷試験の短所について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["探傷速度が遅い。","試験体に接触しなければならない。","試験の自動化が容易でない。","一般に試験体内部の探傷が困難である。"],correct_option_index:3,explanation:"渦電流探傷の短所として、表皮効果のため内部の探傷が困難であることが挙げられます。探傷速度が速く、非接触で、自動化が容易な点は長所です。"},
      {id:"1.34",question:"1.34 次に示す渦電流試験の特性とそれに関連する効果の組合せの中で正しいものを一つ選び、記号で答えなさい。",choices:["金属上の非導電性被膜の厚さ測定 - 表皮効果","表面きずに対する高感度な探傷 - リフトオフ効果","試験体端部の探傷不能な領域の発生 - 速度効果","上置プローブの上下動による雑音 - リフトオフ効果"],correct_option_index:3,explanation:"上置プローブが試験体表面から上下に動くと、コイルと試験体の距離が変化します。この距離の変化（リフトオフ）によってノイズが発生します。これをリフトオフ効果と呼びます。"},
      {id:"1.35",question:"1.35 次のものは電磁誘導試験が適用可能と思われるものを列挙したものであるが、最も適していると考えられるものを一つ選び、記号で答えなさい。",choices:["溶接部の溶け込み不良の検出","アルミニウム合金の導電率の測定","鉄骨構造物の溶接部表面の検査","セラミックスの形状検査"],correct_option_index:1,explanation:"アルミニウム合金の熱処理状態や材質の違いは、導電率の違いとして現れるため、電磁誘導試験（渦電流試験）による導電率測定は非常に有効な適用例です。"},
      {id:"1.36",question:"1.36 電磁誘導現象を発見したのは誰か。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["ヒューズ","クーロン","ファラデー","フェルスター"],correct_option_index:2,explanation:"電磁誘導現象は、1831年にイギリスの科学者マイケル・ファラデーによって発見されました。"},
      {id:"1.37",question:"1.37 強磁性体の材質試験に関する記述について、次の中から正しいものを一つ選び、記号で答えなさい。",choices:["鉄鋼材料の材質試験は、導電率と透磁率の2つの変化を利用している。","試験周波数は、数十kHzから数百kHzが使用される。","出力電圧を解析することにより、焼き入れ処理の程度や圧延加工の有無などを検査することが可能である。","励磁磁界の強度は材質判別の結果に関係がないので、いくらでも良い。"],correct_option_index:0,explanation:"強磁性体である鉄鋼材料の材質は、導電率と透磁率の両方の変化に影響を与えます。渦電流試験では、これらの複合的な変化を捉えて材質を判別します。"},
      {id:"2.1",question:"2.1~次の文は、2つの電荷Q₁, Q₂に働く力について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["電荷との積が負のとき、2つの電荷の間には引力が働く。","2つの電荷に働く力は、電荷の大きさに比例し距離に反比例する。","電荷と電荷の間に力が働く現象をレンツの法則という。","電荷 Q₁と Q₂ の間の距離を2倍にすると、力は元の1/2となる。"],correct_option_index:0,explanation:"クーロンの法則によれば、2つの点電荷の間に働く力は、電荷の積が負（異符号）のときに引力となります。力は距離の2乗に反比例するため、距離が2倍になると力は1/4になります。"},
      {id:"2.2",question:"2.2~1秒間に3.1×10¹⁸個の自由電子が導体を移動するときの電流の値はいくらか。次の中から最も近い値を一つ選び、記号で答えなさい。ただし、電子1個の電荷は1.6×10⁻¹⁹Cとする。",choices:["3.8 A","5.0 A","0.5 A","2.0 A"],correct_option_index:2,explanation:"電流は単位時間あたりに移動する電荷の量です。電流 I = (電子の数) × (電子1個の電荷) = (3.1×10¹⁸) × (1.6×10⁻¹⁹) = 0.496 A ≈ 0.5 A となります。"},
      {id:"2.3",question:"2.3~抵抗のみの回路に3Vの直流電圧を加えたら200mAの直流電流が流れた。このとき回路の抵抗Rはいくらか。次の中から最も近い値を一つ選び、記号で答えなさい。",choices:["R=7.5 Ω","R=15 Ω","R=30 Ω","R=45Ω"],correct_option_index:1,explanation:"オームの法則 V=IR より、R = V/I です。電流をアンペアに変換し(200mA = 0.2A)、R = 3V / 0.2A = 15Ω となります。"},
      {id:"2.4",question:"2.4~図2.1に示す3本の抵抗からなる回路の合成抵抗Rは何オームか。次の中から最も近いものを一つ選び、記号で答えなさい。",choices:["2 kΩ","1 kΩ","0.5 kΩ","0.2 kΩ"],correct_option_index:1,explanation:"並列接続された2本の1kΩの合成抵抗は (1*1)/(1+1) = 0.5kΩ です。これに直列の0.5kΩを足すと、全体の合成抵抗は 0.5kΩ + 0.5kΩ = 1kΩ となります。"},
      {id:"2.5",question:"2.5~次の文は、金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えよ。",choices:["電気抵抗は抵抗率に反比例する。","抵抗率の逆数を導電率という。","抵抗率の単位は(Ω/m)である。","抵抗率は形状によって変化する。"],correct_option_index:1,explanation:"抵抗率は物質固有の値で、その逆数が導電率です。電気抵抗は抵抗率に比例し、単位は[Ω・m]です。"},
      {id:"2.6",question:"2.6~磁力線によって磁界の何を表すことができるか。次の中から最も適切なものを一つ選び、記号で答えなさい。",choices:["磁界の密度","磁界の方向および強さ","磁界の位相","磁界の位相および方向"],correct_option_index:1,explanation:"磁力線は、その接線が磁界の方向を、その密度が磁界の強さを表します。"},
      {id:"2.7",question:"2.7~次の式は、材料に加える磁界と材料中の磁束密度の関係を示したものである。次の中から正しいものを一つ選び、記号で答えなさい。ただし、H:磁界の強さ(A/m), B:磁束密度(T), σ:導電率(S/m), μ:透磁率(H/m)である。",choices:["H = μσB","B = μH","H = σB","B = σH"],correct_option_index:1,explanation:"磁束密度Bは、磁界の強さHと物質の透磁率μの積で定義されます。"},
      {id:"2.8",question:"2.8~次に示す磁束密度Bを表す式の中から正しいものを一つ選び、記号で答えなさい。なお、図2.2に示すようにS: 面積、Φ: 磁束である。",choices:["B = Φ - S","B = S - Φ","B = S / Φ","B = Φ / S"],correct_option_index:3,explanation:"磁束密度Bは、単位面積Sあたりの磁束Φとして定義されます。"},
      {id:"2.9",question:"2.9~磁束密度の単位はどれか。次の中から正しいものを一つ選び、記号で答えよ。",choices:["H/m","H","A/m","T"],correct_option_index:3,explanation:"磁束密度の単位はT (テスラ) です。H/mは透磁率、Hはインダクタンス、A/mは磁界の強さの単位です。"},
      {id:"2.10",question:"2.10~次の中から強磁性材料を選びなさい。",choices:["鉄","アルミニウム","銅","チタン"],correct_option_index:0,explanation:"強磁性を示す代表的な元素は鉄、ニッケル、コバルトです。アルミニウムやチタンは常磁性体、銅は反磁性体です。"},
      {id:"2.11",question:"2.11~次の式は、真直ぐな電線に電流I(A)が流れているとき、電線中心からr (m) 離れた点の磁界の強さ H(A/m) を表わすものである。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["H = 2πrI","H = I / (2πr)","H = 1 / (2πr)","H = rI / (2π)"],correct_option_index:1,explanation:"アンペールの法則から導かれる、無限長直線電流が作る磁界の強さの公式です。"},
      {id:"2.12",question:"2.12~次の文は、コイルによって生じる磁界について述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["磁界の強さはコイルに流す電流に反比例する。","コイルに流す電流の向きを逆にしても、磁界の向きは変わらない。","磁界の強さはコイルからの距離によっては変わらない。","磁界の強さはコイルの巻数に比例する。"],correct_option_index:3,explanation:"コイルが作る磁界の強さは、電流の大きさと巻数に比例します。"},
      {id:"2.13",question:"2.13~次の文は、直線状の導体に流した電流とその電流が作る磁界の関係について述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["磁界は導体の長手方向に発生する。","磁界は導体の周方向に発生する。","磁界は導体の半径方向に発生する。","磁界の向きは導体の向きとは無関係である。"],correct_option_index:1,explanation:"アンペアの右ネジの法則により、直線電流が作る磁界は電流の周りの周方向に発生します。"},
      {id:"2.14",question:"2.14~次の材料のうち、コイルに挿入するとコイルの作る磁束が増加するのはどれか。次のうちから正しいものを一つ選び、記号で答えなさい。ただし、コイルに流す電流は一定とする。",choices:["鉄棒","エボナイト棒","銅棒","アルミニウム棒"],correct_option_index:0,explanation:"鉄は透磁率が非常に高い強磁性体なので、コイルに挿入すると磁束が鉄棒に集中し、全体の磁束が増加します。"},
      {id:"2.15",question:"2.15~次の文は、コイルのインダクタンスについて述べたものである。正しいものを一つ選び、記号で答えなさい。ただし、コイルが置かれた媒質の電気・磁気的性質は一定とする。",choices:["コイルの巻数に比例する。","コイルの巻数の2乗に比例する。","コイルの巻数に反比例する。","コイルの巻数の2乗に反比例する。"],correct_option_index:1,explanation:"コイルの自己インダクタンスは、巻数の2乗に比例します。"},

      {id:"2.16",question:"2.16~次の文は、コイルのインダクタンスについて述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["コイルのインダクタンスは巻数で変化するが、形状や寸法により変化することはない。","形状と寸法が同じ2つのボビンにコイルを巻いた。このとき、直径の太い線を巻くより細い直径の線を巻く方がインダクタンスは増加する。","コイルのインダクタンスが大きいほど、コイルが作る磁束は小さくなる。","コイル内に導体が存在すれば、導体に誘導された渦電流により磁束が増加しインダクタンスが増加する。"],correct_option_index:1,explanation:"同じスペースに巻く場合、細い線の方がより多くの巻数を巻けるため、インダクタンスは増加します。また、コイル内に導体が存在すると、渦電流が作る逆向きの磁束により、実効的なインダクタンスは減少します。"},
      {id:"2.17",question:"2.17~次の文は、コイルのインダクタンスについて述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["コイルの巻数の2乗と媒質の透磁率に反比例する。","コイルの巻数の2乗に反比例し、媒質の透磁率に反比例する。","コイルの巻数の2乗に比例し、媒質の透磁率に反比例する。","コイルの巻数の2乗と媒質の透磁率に比例する。"],correct_option_index:3,explanation:"コイルのインダクタンスは、巻数の2乗と、コイル内部の媒質の透磁率の両方に比例します。"},
      {id:"2.18",question:"2.18~コイルのインダクタンスは、巻数を2倍にすると何倍となるか。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["1/2倍","√2倍","2倍","4倍"],correct_option_index:3,explanation:"コイルのインダクタンスは巻数の2乗に比例するため、巻数が2倍になるとインダクタンスは2² = 4倍になります。"},
      {id:"2.19",question:"2.19~一方のコイルに交流電流を流すと近くに置いたもう一方のコイルに起電力が誘導される現象を何というか。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["静電誘導","表皮効果","自己誘導","相互誘導"],correct_option_index:3,explanation:"一方のコイルの電流変化が、もう一方のコイルに電圧を誘導する現象を相互誘導といいます。"},
      {id:"2.20",question:"2.20~コイルに流れる電流の変化による磁束の変化によって、そのコイル自身に起電力が生じる現象を何というか。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["自己誘導","相互誘導","静電誘導","表皮効果"],correct_option_index:0,explanation:"自己誘導は電流の変化によって生じます。交流電流は時間的に変化するため、自己誘導によって交流の起電力が発生します。直流電流では定常状態では変化がないため起電力は生じません。"},
      {id:"2.21",question:"2.21~コイルの中を振幅一定の交流磁束が貫いているとき、コイルに発生する起電力の振幅が大きくなるのは次のうちどれか。正しいものを一つ選び、記号で答えなさい。",choices:["交流磁束の周波数が低くなったとき","交流磁束の周波数が高くなったとき","交流磁束の位相が遅れたとき","交流磁束の位相が進んだとき"],correct_option_index:1,explanation:"誘導起電力の大きさは磁束の時間変化率に比例します。交流磁束の場合、周波数が高いほど時間変化率が大きくなるため、起電力の振幅も大きくなります。"},
      {id:"2.22",question:"2.22~図2.3に示すように、A、B2つのコイルを直角に配置し、コイルAにiₐ = Iₘsin(ωt)なる電流を流したとき、コイルBに観測される電圧νᵦはどのようになるか。次の中から正しいものを一つ選び、記号で答えよ。",choices:["νᵦ = 0","νᵦ = Vₘsin(ωt - π/2)","νᵦ = Vₘsin(ωt - π/4)","νᵦ = Vₘcos(ωt)"],correct_option_index:0,explanation:"コイルAが作る磁束は、コイルBの断面を貫通しない（鎖交しない）ため、磁束が変化してもコイルBには誘導起電力が発生しません。"},
      {id:"2.23",question:"2.23~次の文は、電磁誘導について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["変圧器において1次側に交流電圧を加えると2次側に交流電圧が発生する現象を自己誘導という。","永久磁石をコイルに出し入れするとコイルに起電力が発生する現象を相互誘導という。","コイルに交流電流を流すと逆起電力が発生する現象を自己誘導という。","交流電流を流した試験コイルを導体に近づけると渦電流が誘導される現象を自己誘導という。"],correct_option_index:2,explanation:"自己誘導は電流の変化によって生じます。交流電流は時間的に変化するため、自己誘導によって交流の起電力が発生します。直流電流では定常状態では変化がないため起電力は生じません。"},
      {id:"2.24",question:"2.24~次の式は、試験コイルの電磁誘導現象について示したものである。正しいものを一つ選び、記号で答えなさい。",choices:["コイルを貫く磁束による誘導起電力は、磁束の時間変化割合に比例する。","コイルに永久磁石を入れて静止させておくと、コイルには起電力が発生する。","コイルを貫く磁束による誘導起電力は、コイルの巻数に反比例する。","変圧器の1次側に直流電圧を加えると、2次側にはコイルの巻数比で決まる大きさの直流電圧が発生する。"],correct_option_index:0,explanation:"ファラデーの電磁誘導の法則そのものです。誘導起電力は磁束の変化によって生じるため、静止した磁石(b)や直流電圧(d)では定常状態では発生しません。また、起電力は巻数に比例します(c)。"},


  {id:"2.25",question:"2.25~図2.4に示すように、A、B2つのコイルを直角に配置し、コイルAにiₐ = Iₘsin(ωt)なる電流を流したとき、コイルBに観測される電圧νᵦはどのようになるか。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["νᵦ = 0","νᵦ = Vₘsin(ωt - π/2)","νᵦ = Vₘsin(ωt - π/4)","νᵦ = Vₘcos(ωt)"],correct_option_index:0,explanation:"コイルAが作る磁束は、コイルBの断面を貫通しない（鎖交しない）ため、磁束が変化してもコイルBには誘導起電力が発生しません。"},
  {id:"2.26",question:"2.26~次の文は、コイルの電磁誘導現象について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["コイルに直流電流を流すと自己誘導によって直流の起電力が発生する。","コイルに交流の磁束が作用すると直流電圧が生じる。","コイルに直流の磁束が作用すると、コイルに直流電圧が生じる。","コイルに交流電流を流すと、自己誘導によってコイル自身に交流の起電力が生じる。"],correct_option_index:3,explanation:"自己誘導は電流の変化によって生じます。交流電流は時間的に変化するため、自己誘導によって交流の起電力が発生します。直流電流では定常状態では変化がないため起電力は生じません。"},
  {id:"2.27",question:"2.27~次の文は、導体内に誘導される渦電流の作用について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["渦電流が流れると導体の導電率が変化する。","渦電流が流れると導体が熱を吸収する。","渦電流が流れると磁界が発生する。","渦電流はコイルが作る磁界を増加させる。"],correct_option_index:2,explanation:"電流が流れると、その周りには必ず磁界が発生します（アンペールの法則）。渦電流も電流の一種なので、磁界を発生させます。この磁界が、元の磁束変化を妨げる向きに生じます。"},
  {id:"2.28",question:"2.28~次の文は、渦電流について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["導体に直流磁束を作用させると導体中に渦電流が誘導される。","導体に交流磁束を作用させると導体中に渦電流が誘導される。","交流磁束によって導体の外部空間にも渦電流が誘導される。","導体内に生じた渦電流は表面きずの影響を受けることがない。"],correct_option_index:1,explanation:"渦電流は磁束の「変化」によって誘導されます。したがって、時間的に変化する交流磁束によって誘導されます。直流磁束では誘導されません。"},
  {id:"2.29",question:"2.29~正弦波交流電流の1周期が125μsのとき、電流の周波数はいくらか。次の中から最も近い値を一つ選び、記号で答えなさい。",choices:["64 kHz","32 kHz","8 kHz","4 kHz"],correct_option_index:2,explanation:"周波数fは周期Tの逆数です (f = 1/T)。f = 1 / (125 × 10⁻⁶ s) = 8000 Hz = 8 kHz。"},
  {id:"2.30",question:"2.30~次の式は、正弦波交流電圧v(t)=Vₘsin(ωt+π/2)に対し、これと同一周波数で振幅が等しく、1/4周期だけ位相が遅れている電圧について示したものである。正しいものを一つ選び、記号で答えよ。",choices:["v(t) = 2Vₘsin(ωt - π/2)","v(t) = Vₘsin(ωt)","v(t) = Vₘsin(2ωt + π/2)","v(t) = Vₘsin(ωt + π)"],correct_option_index:1,explanation:"1周期は2πラジアンなので、1/4周期はπ/2ラジアンに相当します。元の位相(ωt+π/2)からπ/2だけ遅らせる（引く）と、新しい位相は (ωt+π/2) - π/2 = ωt となります。したがって、v(t) = Vₘsin(ωt) です。"},
  {id:"2.31",question:"2.31~次の文は、回路素子に交流電圧を加えたときの電圧と電流の位相について述べたものである。正しいものを一つ選び、記号で答えよ。",choices:["インダクタンスの場合、電圧は電流に対してπ/4遅れる。","インダクタンスの場合、電圧と電流は同位相である。","抵抗の場合、電圧は電流に対してπ/4進む。","抵抗の場合、電圧と電流は同位相である。"],correct_option_index:3,explanation:"抵抗では電圧と電流は同位相です。インダクタンスでは電圧が電流に対してπ/2進みます。"},

  {id:"2.32",question:"2.32~図2.5は交流正弦波電流と電圧の波形を示している。電圧の位相は電流に対してどのような関係にあるか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["π/2 (rad)進んでいる。","π/2 (rad)遅れている。","π/4 (rad)進んでいる。","π/4 (rad)遅れている。"],correct_option_index:0,explanation:"図2.5を見ると、電圧波形(v(t))のピークが電流波形(i(t))のピークよりも時間的に早く現れています。電圧が最大値を取る(ωt=0)とき、電流は0であり、その後電圧が0になる(ωt=π/2)ときに電流が最大値を取るため、電圧は電流に対してπ/2進んでいます。"},

  {id:"2.33",question:"2.33~抵抗に正弦波交流電流が流れているとき、抵抗両端の電圧に対して電流の位相はどのような関係となるか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["同位相である。","π/2 (rad)進む。","π/2 (rad)遅れる。","π (rad)遅れる。"],correct_option_index:0,explanation:"抵抗回路では、オームの法則(v=iR)が瞬時値でも成立するため、電圧と電流の位相は常に同じ（同位相）です。"},
  {id:"2.34",question:"2.34~インダクタンスに交流電圧を加えて電流を流したとき、電圧に対する電流の位相はどうなるか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["同位相である。","π/2 (rad)遅れる。","π/2 (rad)進む。","π (rad)遅れる。"],correct_option_index:1,explanation:"インダクタンス（コイル）回路では、電流は電圧に対してπ/2ラジアン(90°)遅れます。"},
  {id:"2.35",question:"2.35~次の文は、インダクタンスに交流電流を流したときの、電流に対する電圧の位相について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["同位相である。","π/2 (rad)遅れる。","π/2 (rad)進む。","π (rad)進む。"],correct_option_index:2,explanation:"この問題は「電流に対する電圧」の位相を聞いています。電流が電圧に対してπ/2遅れるということは、逆に電圧が電流に対してπ/2進むことを意味します。"},
  {id:"2.36",question:"2.36~コイルに交流電流が流れているとき、コイルのインダクタンスはそのままで抵抗が大きくなると、コイルの端子電圧に対する電流の位相はどうなるか。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["進みが大きくなる。","進みが小さくなる。","遅れが大きくなる。","遅れが小さくなる。"],correct_option_index:3,explanation:"位相差角θは tanθ = (ωL)/R で決まります。抵抗Rが大きくなると、tanθの値は小さくなり、遅れ角θも小さくなります。"},
  {id:"2.37",question:"2.37~試験コイルの両端における電圧と電流の位相差φはどのような関係であらわされるか。次のうちから正しいものを一つ選び、記号で答えなさい。ただし、ω:角周波数(rad/s), L:インダクタンス(H), R:抵抗(Ω)とする。",choices:["φ = tan⁻¹(R/ωL)","φ = tan⁻¹(ωL/R)","φ = tan⁻¹(ωL - R)","φ = tan⁻¹(ωL + R)"],correct_option_index:1,explanation:"インピーダンスの複素数表示 Z = R + jωL において、位相角φは虚数部/実数部の逆正接で与えられます。したがって、tanφ = (ωL)/R となります。"},
  {id:"2.38",question:"2.38~コイルのリアクタンスは次のいずれの式で表わされるか。次の中から正しいものを一つ選び、記号で答えなさい。ただし、f:周波数(Hz), L:コイルのインダクタンス(H)とする。",choices:["1/(2πfL)","L/(2πf)"," (2πf)L","2πfL"],correct_option_index:3,explanation:"コイルの誘導性リアクタンスXₗは、角周波数ωとインダクタンスLの積で与えられます。角周波数ωは2πfなので、Xₗ = ωL = 2πfL となります。選択肢cとdは同じ式ですが、問題集の解答ではdが正解とされています。"},
  {id:"2.39",question:"2.39~次の文は、コイルのリアクタンスについて述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。",choices:["インダクタンスとリアクタンスは逆数の関係にある。","リアクタンスは周波数によらず、一定である。","直流ではリアクタンスは無限に高くなる。","インダクタンスが一定のとき、リアクタンスは周波数に比例する。"],correct_option_index:3,explanation:"コイルのリアクタンス Xₗ = 2πfL の式から、インダクタンスLが一定であれば、リアクタンスは周波数fに比例することがわかります。直流(f=0)ではリアクタンスは0になります。"},
  {id:"2.40",question:"2.40~試験周波数が10kHzのとき、試験コイルの抵抗が3.0Ω、インダクタンスが63.7μHであった。試験コイルのインピーダンスは何Ωとなるか。次のうちから最も近いものを一つ選び、記号で答えなさい。",choices:["2.6Ω","5Ω","16Ω","25Ω"],correct_option_index:1,explanation:"リアクタンス Xₗ = 2πfL = 2π(10×10³) (63.7×10⁻⁶) ≈ 4.0Ω。インピーダンス Z = √(3² + 4²) = √25 = 5Ω。"},
  {id:"2.41",question:"2.41~次の文は、コイルのインピーダンスについて述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["インピーダンスは抵抗とインダクタンスからなる。","インピーダンスはインダクタンスとリアクタンスからなる。","インピーダンスは抵抗とリアクタンスからなる。","インピーダンスは抵抗とキャパシタンスからなる。"],correct_option_index:2,explanation:"インピーダンスは、交流回路における総合的な抵抗であり、抵抗成分とリアクタンス成分（コイルの場合は誘導性リアクタンス）を合成したものです。"},
  {id:"2.42",question:"2.42~次の式は、抵抗RとリアクタンスXとが直列になった回路のインピーダンスを示したものである。正しいものを一つ選び、記号で答えなさい。",choices:["R + X","R² + X²","√(R² + X²)","√R + √X"],correct_option_index:2,explanation:"インピーダンスZは、抵抗RとリアクタンスXを直角2辺とする直角三角形の斜辺の長さに相当するため、三平方の定理により Z = √(R² + X²) で計算されます。"},
  {id:"2.43",question:"2.43~次の式は、コイルのインピーダンスに関連する関係式を示す。正しいものを一つ選び、記号で答えなさい。ただし、R:抵抗、L:インダクタンス、Z:インピーダンス、θ:位相、f:周波数, ω:角周波数(ω=2πf)である。",choices:["θ = tan⁻¹(ωL/R)","tanθ = (R/ωL)","Z = √R + ωL","Z² = R² + ωL²"],correct_option_index:0,explanation:"インピーダンスの位相角θは、リアクタンス成分(ωL)と抵抗成分(R)の比の逆正接で与えられます。したがって、tanθ = ωL/R であり、θ = tan⁻¹(ωL/R) となります。"},
  {id:"2.44",question:"2.44~次の単位は電磁気に関する単位の記号を挙げたものであるが、リアクタンスの単位はどれか。正しいものを一つ選び、記号で答えなさい。",choices:["Ω","A/m","H","T"],correct_option_index:0,explanation:"リアクタンスは交流回路における抵抗の一種なので、単位は抵抗と同じΩ（オーム）です。"},
  ,
  {id:"3.1",question:"3.1 次の文は、導体中を流れる電流について述べたものである。これらの中から正しいものを一つ選び、記号で答えなさい。",choices:["負の電荷をもった自由電子が、陰極に移動することで導体中に電流が流れる。","導体の温度が上昇すると、抵抗率が高くなる。","冷間圧延などの塑性加工を行なうと、金属の原子配列が不規則となり電流が流れ易くなる。","銅にスズなどの不純物が添加されると、格子欠陥が発生し電流が流れ易くなる。"],correct_option_index:1,explanation:"導体の温度が上昇すると、原子の熱振動が激しくなり、自由電子の移動が妨げられるため抵抗率は高くなります。c, dの塑性加工や不純物添加は、結晶格子に歪みを生じさせ、電流の流れを妨げる（抵抗率が高くなる）要因となります。"},
  {id:"3.2",question:"3.2 次の文は、金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["電気抵抗は抵抗率に反比例する。","抵抗率の逆数を比抵抗率という。","抵抗率の単位は[Ω/m]である。","抵抗率は導電率の逆数である。"],correct_option_index:3,explanation:"抵抗率は導電率の逆数です。電気抵抗は抵抗率に比例し、抵抗率の単位は[Ω・m]です。"},
  {id:"3.3",question:"3.3 次の文は、金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["抵抗率は導電率に比例する。","抵抗率の単位は[Ω/m]である。","抵抗率の逆数を比抵抗率という。","抵抗率は物質定数であり形状によって変化しない。"],correct_option_index:3,explanation:"抵抗率は物質固有の定数であり、温度や組成が同じであれば、導体の形状（長さや断面積）によって変化しません。"},
  {id:"3.4",question:"3.4 次の式は、導体の抵抗率を表す式を上げたものである。次の中から正しいものを一つ選び、記号で答えなさい。ただし、p:抵抗率(Ω m), R: 導体の電気抵抗(Ω), l:導体の長さ(m), S:導体の断面積(m²)である。",choices:["ρ = RS/l²","ρ = Rl/S","ρ = l/RS","ρ = RS/l"],correct_option_index:3,explanation:"導体の電気抵抗Rは、R = ρl/Sという関係式で表されます。この式を抵抗率ρについて解くと、ρ = RS/lとなります。"},
  {id:"3.5",question:"3.5 次の文は、金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["導体の断面積に反比例する。","導体の形状によって変化しない。","導体の長さに比例する。","導体の電気の流しやすさを示す。"],correct_option_index:1,explanation:"抵抗率は物質固有の定数であり、導体の形状（長さや断面積）によって変化しません。変化するのは電気抵抗Rです。"},
  {id:"3.6",question:"3.6 金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["金属の種類には関係ない。","金属の断面積に反比例する。","金属の温度によって異なる。","金属の長さに比例する。"],correct_option_index:2,explanation:"抵抗率は物質固有の定数ですが、温度によって値が変化します。一般的に金属は温度が上がると抵抗率も高くなります。"},
  {id:"3.7",question:"3.7 抵抗率3.44×10⁻⁸Ω・mのアルミニウム合金の導電率をIACS%で表わすと、およそいくらになるか。次のうちから正しいものを一つ選び、記号で答えなさい。ただし、標準軟銅の抵抗率は1.72×10⁻⁸Ω・mとする。",choices:["3%","200%","50%","0.5%"],correct_option_index:2,explanation:"IACS%は標準軟銅の導電率を100%とした時の比率です。導電率は抵抗率の逆数なので、IACS% = (標準軟銅の抵抗率 / 対象金属の抵抗率) × 100 = (1.72×10⁻⁸ / 3.44×10⁻⁸) × 100 = 0.5 × 100 = 50%。"},
  {id:"3.8",question:"3.8 次の文は、IACS%について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["金属の導電率を、純銅を基準とした割合で表す国際標準である。","金属の透磁率を、純銅を基準とした割合で表す国際標準である。","金属の導電率を、純鉄を基準とした割合で表す国際標準である。","金属の透磁率を、純鉄を基準とした割合で表す国際標準である。"],correct_option_index:0,explanation:"IACS% (International Annealed Copper Standard) は、国際的に標準と定められた焼なまし軟銅の導電率を100%として、他の金属の導電率を相対的な割合で示す指標です。"},
  {id:"3.9",question:"3.9 次の文は、金属の電磁気的性質について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["鋼の導電率は温度が上昇すると増加する。","冷間加工した銅線を焼鈍すると抵抗率は減少する。","銅に不純物を添加すると抵抗率は減少する。","焼鈍した炭素鋼を冷間加工すると導電率が高くなる。"],correct_option_index:1,explanation:"冷間加工によって生じた結晶格子の歪みは、焼鈍（焼きなまし）によって取り除かれ、整然とした配列に戻ります。これにより電子が移動しやすくなり、抵抗率は減少（導電率は増加）します。"},
  {id:"3.10",question:"3.10 次の文は、金属の電磁気的性質について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["冷間加工した鋼を焼鈍すると、透磁率は低下する。","鋼を加熱すると、抵抗率は低くなる。","強磁性材は低温で非磁性の性質を失う。","焼鈍した炭素鋼を冷間加工すると透磁率は低くなる。"],correct_option_index:3,explanation:"冷間加工は結晶格子に歪みを生じさせるため、磁区の動きが妨げられ、透磁率は低下します。逆に焼鈍すると歪みが取り除かれ、透磁率は高くなります。"},
  {id:"3.11",question:"3.11 次の中で、金属の抵抗率を変化させない因子はどれか。適切なものを一つ選び、記号で答えなさい。",choices:["導体の温度","磁界","圧延加工","不純物"],correct_option_index:1,explanation:"温度、圧延加工（塑性加工）、不純物はすべて金属の結晶構造や電子の動きに影響を与え、抵抗率を変化させる要因です。磁界も磁気抵抗効果により抵抗率をわずかに変化させることがありますが、他の因子に比べて影響は限定的であり、この選択肢の中では最も変化させない因子と考えられます。"},
  {id:"3.12",question:"3.12 次のものは、加工等により低下している金属の導電率を回復させる処理について述べたものである。最も適切なものを一つ選び、記号で答えなさい。",choices:["焼入れ","不純物添加","焼鈍","冷間加工"],correct_option_index:2,explanation:"焼鈍（焼きなまし）は、加工によって乱れた金属の結晶格子を再配列させ、歪みを取り除く熱処理です。これにより電子が動きやすくなり、低下した導電率（増加した抵抗率）が回復します。"},
  {id:"3.13",question:"3.13 次の文は、金属の磁気的性質について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["非磁性体は磁石に吸引される金属である。","強磁性体は磁束を集束する金属である。","非磁性体の代表的なものは強磁性を示す。","強磁性体の代表的なものとして銅合金がある。"],correct_option_index:1,explanation:"強磁性体は高い透磁率を持ち、外部の磁束を内部に引き込み集束させる性質があります。非磁性体は磁石に吸引されないか、されても極めて弱いです。銅合金は非磁性体です。"},
  {id:"3.14",question:"3.14 次の文は、磁化曲線について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["磁界の強さと材料の透磁率との関係を表す。","磁界の強さと材料の磁束との関係を表す。","磁界の強さと材料の磁束密度との関係を表す。","磁界の強さと材料の渦電流密度との関係を表す。"],correct_option_index:2,explanation:"磁化曲線（B-H曲線）は、物質に加える外部磁界の強さ(H)を横軸に、それによって物質内に生じる磁束密度(B)を縦軸にとって、両者の関係を示したグラフです。"},
  {id:"3.15",question:"3.15 次の文は、透磁率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["磁束密度と磁界の強さとの比を表す。","電界の強さと磁束密度との比を表す。","磁気抵抗と磁界の強さとの比を表す。","磁束と磁束密度との比を表す。"],correct_option_index:0,explanation:"透磁率μは、磁束密度Bと磁界の強さHの関係式 B = μH から、μ = B/H となり、磁束密度と磁界の強さの比で定義されます。"},
  {id:"3.16",question:"3.16 図3.1に示す磁気ヒステリシス曲線において、横軸のHと縦軸のBは何か。次の中から正しい組合せを示すものを一つ選び、記号で答えなさい。",choices:["H:磁界、B:磁束密度","H:磁界、B:磁束","H:電界、B:磁束密度","H:電界、B:磁束"],correct_option_index:0,explanation:"磁気ヒステリシス曲線（B-H曲線）は、横軸に磁界の強さ(H)、縦軸に磁束密度(B)をとってプロットしたものです。"},
  {id:"3.17",question:"3.17 次の文の [ ] 内に挿入する数値または用語として適切なものを、次のうちから一つ選び、記号で答えなさい。「鉄のキュリー温度は約 [①] であり、この温度以上では、強磁性材料である鉄も [②] となる。」",choices:["①1130℃ ②非磁性体","①770℃ ②絶縁体","①770℃ ②非磁性体","①1130°C ②導体"],correct_option_index:2,explanation:"強磁性体がその磁性を失い、常磁性体に変化する温度をキュリー温度（またはキュリー点）と呼びます。鉄のキュリー温度は約770℃です。この温度以上では、鉄は非磁性体（厳密には常磁性体）として振る舞います。"},
  {id:"3.18",question:"3.18 次の中から材料の磁気的な特性を表わす用語を一つ選び、記号で答えなさい。",choices:["磁界","磁極","透磁率","磁束密度"],correct_option_index:2,explanation:"透磁率は、物質がどれだけ磁化されやすいかを示す、材料固有の磁気的な特性値（物性値）です。磁界や磁束密度は場や状態を表す量であり、磁極は磁石のN/S極を指します。"},
  {id:"3.19",question:"3.19 次の文は、磁化曲線について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["保磁力とは飽和磁気を打ち消すのに必要な外部磁界の強さを言う。","透磁率は磁束密度と磁界の強さの積で表される。","磁界の増加に伴って比透磁率が1に近づく現象を磁気飽和という。","残留磁束密度とは磁気飽和の後で磁界の強さを1/2にしたとき残留している磁束をいう。"],correct_option_index:2,explanation:"強磁性体に強い磁界をかけていくと、磁化がある一定の値で頭打ちになります。これを磁気飽和といいます。この状態では、透磁率が大幅に低下し、非磁性体と同様に比透磁率が1に近い値になります。"},
  {id:"3.20",question:"3.20 次の文は、材料の透磁率について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["磁気回路の抵抗を表す。","磁気回路のインピーダンスを表す。","磁束の通り易さを表す。","磁気抵抗の強さを表す。"],correct_option_index:2,explanation:"透磁率は、物質の磁束の通りやすさを表す指標です。透磁率が高いほど、磁束は通りやすくなります。磁気回路の抵抗に相当するものは「磁気抵抗（リラクタンス）」です。"},
  {id:"3.21",question:"3.21 次の文は、磁化曲線について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["材料に作用させた電界と磁界の関係を表わす。","磁束密度は飽和領域まで磁界に正比例することが示される。","保磁力は残留磁束密度を表す。","材料に作用させた磁界と材料中の磁束密度との関係を表わす。"],correct_option_index:3,explanation:"磁化曲線は、横軸に磁界の強さ(H)、縦軸に磁束密度(B)をとり、両者の関係を示したグラフです。"},
  {id:"3.22",question:"3.22 次の文は、強磁性体の性質または特性について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["試験コイルに近づけると非磁性体の場合よりも磁束が少なくなる。","渦電流探傷試験において磁気特性の不均一のために雑音が発生する。","比透磁率は磁界の強さに関係なく常に1である。","透磁率は磁界の強さに比例する。"],correct_option_index:1,explanation:"強磁性体は、化学成分や熱処理、加工履歴などによって局所的に磁気特性（透磁率など）が不均一になりがちです。これが渦電流探傷試験において「磁気ノイズ（磁性ノイズ）」と呼ばれる雑音の原因となり、きず信号の検出を困難にします。"},
  {id:"3.23",question:"3.23 比透磁率がほぼ1に等しい物質を何というか。次のうちから適切なものを一つ選び、記号で答えなさい。",choices:["強磁性体","非磁性体","導体","絶縁体"],correct_option_index:1,explanation:"比透磁率は、真空の透磁率を1としたときの物質の透磁率の比です。強磁性体は数百～数千という大きな値を持ちますが、非磁性体（常磁性体、反磁性体）の比透磁率はほぼ1とみなせます。"},
  {id:"3.24",question:"3.24 次の文は、キュリー温度について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["温度を上げたときに磁性体が強磁性から非磁性に変わる温度をいう。","温度を上げたときに磁性体の抵抗率が急激に減少して零となる温度をいう。","温度を上げたときに磁性体の透磁率が急激に大きくなるときの温度をいう。","温度を上げたときに磁性体の導電率が急激に減少して零となる温度をいう。"],correct_option_index:0,explanation:"キュリー温度は、強磁性体がその性質を失い、常磁性体（非磁性体の一種）に転移する温度のことです。"},
  {id:"3.25",question:"3.25 強磁性材料に外部磁界を与えて磁気飽和の状態にすると、材料中にどのような磁気的現象が生じるか。次のうちから正しいものを一つ選び、記号で答えなさい。",choices:["材料内部の全ての磁区が外部磁界と反対の方向を向く。","比透磁率が1に近づき、透磁率の不均一の度合いが小さくなる。","材料の表面における磁束密度が無限大となる。","材料中の磁束が0となる。"],correct_option_index:1,explanation:"強磁性体を磁気飽和させると、それ以上磁化が進まなくなり、見かけ上の透磁率が大幅に低下して、比透磁率が1に近い値になります。これにより、材料内の局所的な透磁率のばらつきの影響が小さくなり、磁気ノイズが低減します。"},
  {id:"3.26",question:"3.26 貫通プローブによる渦電流探傷試験において、直流磁気飽和を必要とする材料は次のうちのどれか。正しいものを一つ選び、記号で答えなさい。",choices:["鋼管","銅線","チタン管","ジュラルミン丸棒"],correct_option_index:0,explanation:"鋼管は強磁性材料であり、磁気ノイズが発生しやすいため、直流磁気飽和を適用してノイズを抑制する必要があります。銅、チタン、ジュラルミンは非磁性体なので不要です。"},
  {id:"3.27",question:"3.27 次の金属材料について、透磁率が最も高いものはどれか。次の中から一つ選び、記号で答えなさい。",choices:["炭素鋼 S45C(焼入れ)","純鉄","炭素鋼 S15C (焼なまし)","炭素鋼 S45C (焼なまし)"],correct_option_index:1,explanation:"透磁率は、不純物が少なく、結晶格子の歪みが小さいほど高くなります。純鉄は不純物が最も少なく、また焼入れや加工による歪みもないため、透磁率が最も高くなります。"},
  {id:"3.28",question:"3.28 次の文は、金属の磁気的性質について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["非磁性体は常磁性体と反磁性体に分類され、ニッケルは常磁性体に分類される。","強磁性体以外の金属を非磁性体といい、チタンやアルミニウムはこれに当る。","磁石を近づけると、強く磁化されるものを強磁性体といい、タングステンはこれに当る。","反磁性体とは、強い磁化で磁界と同方向にわずかに磁化するものをいう。"],correct_option_index:1,explanation:"強磁性体（鉄、ニッケル、コバルトなど）以外の金属は、総称して非磁性体と呼ばれます。非磁性体は、磁界と同じ向きにわずかに磁化される常磁性体（チタン、アルミニウムなど）と、逆向きにごくわずかに磁化される反磁性体（銅、金など）に分類されます。磁気ヒステリシスは強磁性体に特有の現象です。"},
  {id:"3.29",question:"3.29 次に示す金属材料で、透磁率がもっとも低い値を示すものはどれか。正しいものを一つ選び、記号で答えなさい。",choices:["S15C (焼なまし)","純鉄","S45C (焼入れ)","ケイ素鋼"],correct_option_index:2,explanation:"透磁率は、不純物が多いほど、また結晶格子の歪みが大きいほど低くなります。S45Cは炭素含有量が多く、さらに焼入れによって硬くなり、結晶格子の歪みが非常に大きくなるため、この中では透磁率が最も低くなります。"},
  {id:"3.30",question:"3.30 次の文は、金属材料の磁気特性について述べたものである。正しいものを一つ選び、記号で答えなさい。",choices:["炭素鋼に対して冷間圧延等の塑性加工を行なうと、透磁率は高くなる。","オーステナイト系ステンレス鋼は磁石に吸引される。","炭素鋼は鉄に2%未満の炭素を添加した合金鋼であり、純鉄に比べて透磁率は低い。","圧延した炭素鋼に焼きなましを行なうと、透磁率は低下する。"],correct_option_index:2,explanation:"炭素は鉄にとって不純物として働き、磁区の動きを妨げるため、炭素を添加した炭素鋼は純鉄よりも透磁率が低くなります。また、オーステナイト系ステンレス鋼は非磁性です。"},
  {id:"3.31",question:"3.31 次の文は、強磁性体の透磁率又は比透磁率について述べたものである。正しいものを一つ選び、記号で答えよ。",choices:["透磁率は磁束密度Bと磁界の強さHとの比H/Bで与えられる。","炭素鋼の比透磁率は数百~数千程度である。","磁化曲線におけるマイナーループによる透磁率を微分透磁率という。","初磁化曲線上で磁界が極めて小さい場合の透磁率を比透磁率という。"],correct_option_index:1,explanation:"炭素鋼のような一般的な強磁性体の比透磁率は、材料や状態によりますが、数百から数千のオーダーになります。透磁率はB/Hで与えられます。磁界が極めて小さい場合の透磁率は初透磁率といいます。"},
  {id:"3.32",question:"3.32 次の文は、金属材料の分類と磁気的性質について述べたものである。正しいものを一つ選び、記号で答えよ。",choices:["オーステナイト系ステンレス鋼は強磁性材料である。","金、銀、銅は常磁性体に分類される。","非磁性体には常磁性体と反磁性体が含まれる","非磁性体は磁気ヒステリシス曲線を描く。"],correct_option_index:2,explanation:"磁性体は大きく強磁性体と非磁性体に分けられます。非磁性体はさらに、磁界と同じ向きに弱く磁化される常磁性体と、逆向きにごく弱く磁化される反磁性体に分類されます。磁気ヒステリシスは強磁性体に特有の現象です。"}
    ];

    // --- ここから下はメインスクリプト ---
/* const chapter2Data = {
        "chapter_number": 2,
        "chapter_title": "電気と磁気の基礎",
        "questions": [
          {"id":"2.1","question":"2.1 次の文は、2つの電荷Q₁, Q₂に働く力について述べたものである。正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"電荷との積が負のとき、2つの電荷の間には引力が働く。"},{"option":"b","text":"2つの電荷に働く力は、電荷の大きさに比例し距離に反比例する。"},{"option":"c","text":"電荷と電荷の間に力が働く現象をレンツの法則という。"},{"option":"d","text":"電荷 Q₁と Q₂ の間の距離を2倍にすると、力は元の1/2となる。"}],"correct_option":"a","explanation":"クーロンの法則によれば、2つの点電荷の間に働く力は、電荷の積が負（異符号）のときに引力となります。力は距離の2乗に反比例するため、距離が2倍になると力は1/4になります。"},
          {"id":"2.2","question":"2.2 1秒間に3.1×10¹⁸個の自由電子が導体を移動するときの電流の値はいくらか。次の中から最も近い値を一つ選び、記号で答えなさい。ただし、電子1個の電荷は1.6×10⁻¹⁹Cとする。","choices":[{"option":"a","text":"3.8 A"},{"option":"b","text":"5.0 A"},{"option":"c","text":"0.5 A"},{"option":"d","text":"2.0 A"}],"correct_option":"c","explanation":"電流は単位時間あたりに移動する電荷の量です。電流 I = (電子の数) × (電子1個の電荷) = (3.1×10¹⁸) × (1.6×10⁻¹⁹) = 0.496 A ≈ 0.5 A となります。"},
          {"id":"2.3","question":"2.3 抵抗のみの回路に3Vの直流電圧を加えたら200mAの直流電流が流れた。このとき回路の抵抗Rはいくらか。次の中から最も近い値を一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"R=7.5 Ω"},{"option":"b","text":"R=15 Ω"},{"option":"c","text":"R=30 Ω"},{"option":"d","text":"R=45Ω"}],"correct_option":"b","explanation":"オームの法則 V=IR より、R = V/I です。電流をアンペアに変換し(200mA = 0.2A)、R = 3V / 0.2A = 15Ω となります。"},
          {"id":"2.4","question":"2.4 図2.1に示す3本の抵抗からなる回路の合成抵抗Rは何オームか。次の中から最も近いものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"2 kΩ"},{"option":"b","text":"1 kΩ"},{"option":"c","text":"0.5 kΩ"},{"option":"d","text":"0.2 kΩ"}],"correct_option":"b","explanation":"並列接続された2本の1kΩの合成抵抗は (1*1)/(1+1) = 0.5kΩ です。これに直列の0.5kΩを足すと、全体の合成抵抗は 0.5kΩ + 0.5kΩ = 1kΩ となります。"},
          {"id":"2.5","question":"2.5 次の文は、金属の抵抗率について述べたものである。正しいものを一つ選び、記号で答えよ。","choices":[{"option":"a","text":"電気抵抗は抵抗率に反比例する。"},{"option":"b","text":"抵抗率の逆数を導電率という。"},{"option":"c","text":"抵抗率の単位は(Ω/m)である。"},{"option":"d","text":"抵抗率は形状によって変化する。"}],"correct_option":"b","explanation":"抵抗率は物質固有の値で、その逆数が導電率です。電気抵抗は抵抗率に比例し、単位は[Ω・m]です。"},
          {"id":"2.6","question":"2.6 磁力線によって磁界の何を表すことができるか。次の中から最も適切なものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"磁界の密度"},{"option":"b","text":"磁界の方向および強さ"},{"option":"c","text":"磁界の位相"},{"option":"d","text":"磁界の位相および方向"}],"correct_option":"b","explanation":"磁力線は、その接線が磁界の方向を、その密度が磁界の強さを表します。"},
          {"id":"2.7","question":"2.7 次の式は、材料に加える磁界と材料中の磁束密度の関係を示したものである。次の中から正しいものを一つ選び、記号で答えなさい。ただし、H:磁界の強さ(A/m), B:磁束密度(T), σ:導電率(S/m), μ:透磁率(H/m)である。","choices":[{"option":"a","text":"H = μσB"},{"option":"b","text":"B = μH"},{"option":"c","text":"H = σB"},{"option":"d","text":"B = σH"}],"correct_option":"b","explanation":"磁束密度Bは、磁界の強さHと物質の透磁率μの積で定義されます。"},
          {"id":"2.8","question":"2.8 次に示す磁束密度Bを表す式の中から正しいものを一つ選び、記号で答えなさい。なお、図2.2に示すようにS: 面積、Φ: 磁束である。","choices":[{"option":"a","text":"B = Φ - S"},{"option":"b","text":"B = S - Φ"},{"option":"c","text":"B = S / Φ"},{"option":"d","text":"B = Φ / S"}],"correct_option":"d","explanation":"磁束密度Bは、単位面積Sあたりの磁束Φとして定義されます。"},
          {"id":"2.9","question":"2.9 磁束密度の単位はどれか。次の中から正しいものを一つ選び、記号で答えよ。","choices":[{"option":"a","text":"H/m"},{"option":"b","text":"H"},{"option":"c","text":"A/m"},{"option":"d","text":"T"}],"correct_option":"d","explanation":"磁束密度の単位はT (テスラ) です。H/mは透磁率、Hはインダクタンス、A/mは磁界の強さの単位です。"},
          {"id":"2.10","question":"2.10 次の中から強磁性材料を選びなさい。","choices":[{"option":"a","text":"鉄"},{"option":"b","text":"アルミニウム"},{"option":"c","text":"銅"},{"option":"d","text":"チタン"}],"correct_option":"a","explanation":"強磁性を示す代表的な元素は鉄、ニッケル、コバルトです。アルミニウムやチタンは常磁性体、銅は反磁性体です。"},
          {"id":"2.11","question":"2.11 次の式は、真直ぐな電線に電流I(A)が流れているとき、電線中心からr (m) 離れた点の磁界の強さ H(A/m) を表わすものである。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"H = 2πrI"},{"option":"b","text":"H = I / (2πr)"},{"option":"c","text":"H = 1 / (2πr)"},{"option":"d","text":"H = rI / (2π)"}],"correct_option":"b","explanation":"アンペールの法則から導かれる、無限長直線電流が作る磁界の強さの公式です。"},
          {"id":"2.12","question":"2.12 次の文は、コイルによって生じる磁界について述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"磁界の強さはコイルに流す電流に反比例する。"},{"option":"b","text":"コイルに流す電流の向きを逆にしても、磁界の向きは変わらない。"},{"option":"c","text":"磁界の強さはコイルからの距離によっては変わらない。"},{"option":"d","text":"磁界の強さはコイルの巻数に比例する。"}],"correct_option":"d","explanation":"コイルが作る磁界の強さは、電流の大きさと巻数に比例します。"},
          {"id":"2.13","question":"2.13 次の文は、直線状の導体に流した電流とその電流が作る磁界の関係について述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"磁界は導体の長手方向に発生する。"},{"option":"b","text":"磁界は導体の周方向に発生する。"},{"option":"c","text":"磁界は導体の半径方向に発生する。"},{"option":"d","text":"磁界の向きは導体の向きとは無関係である。"}],"correct_option":"b","explanation":"アンペアの右ネジの法則により、直線電流が作る磁界は電流の周りの周方向に発生します。"},
          {"id":"2.14","question":"2.14 次の材料のうち、コイルに挿入するとコイルの作る磁束が増加するのはどれか。次のうちから正しいものを一つ選び、記号で答えなさい。ただし、コイルに流す電流は一定とする。","choices":[{"option":"a","text":"鉄棒"},{"option":"b","text":"エボナイト棒"},{"option":"c","text":"銅棒"},{"option":"d","text":"アルミニウム棒"}],"correct_option":"a","explanation":"鉄は透磁率が非常に高い強磁性体なので、コイルに挿入すると磁束が鉄棒に集中し、全体の磁束が増加します。"},
          {"id":"2.15","question":"2.15 次の文は、コイルのインダクタンスについて述べたものである。正しいものを一つ選び、記号で答えなさい。ただし、コイルが置かれた媒質の電気・磁気的性質は一定とする。","choices":[{"option":"a","text":"コイルの巻数に比例する。"},{"option":"b","text":"コイルの巻数の2乗に比例する。"},{"option":"c","text":"コイルの巻数に反比例する。"},{"option":"d","text":"コイルの巻数の2乗に反比例する。"}],"correct_option":"b","explanation":"コイルの自己インダクタンスは、巻数の2乗に比例します。"},
          {"id":"2.16","question":"2.16 次の文は、コイルのインダクタンスについて述べたものである。正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"コイルのインダクタンスは巻数で変化するが、形状や寸法により変化することはない。"},{"option":"b","text":"形状と寸法が同じ2つのボビンにコイルを巻いた。このとき、直径の太い線を巻くより細い直径の線を巻く方がインダクタンスは増加する。"},{"option":"c","text":"コイルのインダクタンスが大きいほど、コイルが作る磁束は小さくなる。"},{"option":"d","text":"コイル内に導体が存在すれば、導体に誘導された渦電流により磁束が増加しインダクタンスが増加する。"}],"correct_option":"b","explanation":"同じスペースに巻く場合、細い線の方がより多くの巻数を巻けるため、インダクタンスは増加します。また、コイル内に導体が存在すると、渦電流が作る逆向きの磁束により、実効的なインダクタンスは減少します。"},
          {"id":"2.17","question":"2.17 次の文は、コイルのインダクタンスについて述べたものである。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"コイルの巻数の2乗と媒質の透磁率に反比例する。"},{"option":"b","text":"コイルの巻数の2乗に反比例し、媒質の透磁率に反比例する。"},{"option":"c","text":"コイルの巻数の2乗に比例し、媒質の透磁率に反比例する。"},{"option":"d","text":"コイルの巻数の2乗と媒質の透磁率に比例する。"}],"correct_option":"d","explanation":"コイルのインダクタンスは、巻数の2乗と、コイル内部の媒質の透磁率の両方に比例します。"},
          {"id":"2.18","question":"2.18 コイルのインダクタンスは、巻数を2倍にすると何倍となるか。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"1/2倍"},{"option":"b","text":"√2倍"},{"option":"c","text":"2倍"},{"option":"d","text":"4倍"}],"correct_option":"d","explanation":"コイルのインダクタンスは巻数の2乗に比例するため、巻数が2倍になるとインダクタンスは2² = 4倍になります。"},
          {"id":"2.19","question":"2.19 一方のコイルに交流電流を流すと近くに置いたもう一方のコイルに起電力が誘導される現象を何というか。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"静電誘導"},{"option":"b","text":"表皮効果"},{"option":"c","text":"自己誘導"},{"option":"d","text":"相互誘導"}],"correct_option":"d","explanation":"一方のコイルの電流変化が、もう一方のコイルに電圧を誘導する現象を相互誘導といいます。"},
          {"id":"2.20","question":"2.20 コイルに流れる電流の変化による磁束の変化によって、そのコイル自身に起電力が生じる現象を何というか。次の中から正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"自己誘導"},{"option":"b","text":"相互誘導"},{"option":"c","text":"静電誘導"},{"option":"d","text":"表皮効果"}],"correct_option":"a","explanation":"コイル自身の電流変化によって、コイル自身に起電力が生じる現象を自己誘導といいます。"},
          {"id":"2.21","question":"2.21 コイルの中を振幅一定の交流磁束が貫いているとき、コイルに発生する起電力の振幅が大きくなるのは次のうちどれか。正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"交流磁束の周波数が低くなったとき"},{"option":"b","text":"交流磁束の周波数が高くなったとき"},{"option":"c","text":"交流磁束の位相が遅れたとき"},{"option":"d","text":"交流磁束の位相が進んだとき"}],"correct_option":"b","explanation":"誘導起電力の大きさは磁束の時間変化率に比例します。交流磁束の場合、周波数が高いほど時間変化率が大きくなるため、起電力の振幅も大きくなります。"},
          {"id":"2.22","question":"2.22 図2.3は、コイルの一方に交流定電流電源、もう一方に交流電圧計が接続されている状態を示している。このとき、電源の周波数を2倍にしたら交流電圧計の指示はどうなるか。次の中から正しいものを一つ選び、記号で答えよ。","choices":[{"option":"a","text":"1/2になる。"},{"option":"b","text":"変わらない。"},{"option":"c","text":"2倍になる。"},{"option":"d","text":"4倍になる。"}],"correct_option":"c","explanation":"交流定電流電源は電流の振幅を一定に保ちます。コイルの電圧(誘導起電力)の振幅は、電流の振幅と周波数に比例するため、周波数を2倍にすると電圧も2倍になります。"},
          {"id":"2.23","question":"2.23 次の文は、電磁誘導について述べたものである。正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"変圧器において1次側に交流電圧を加えると2次側に交流電圧が発生する現象を自己誘導という。"},{"option":"b","text":"永久磁石をコイルに出し入れするとコイルに起電力が発生する現象を相互誘導という。"},{"option":"c","text":"コイルに交流電流を流すと逆起電力が発生する現象を自己誘導という。"},{"option":"d","text":"交流電流を流した試験コイルを導体に近づけると渦電流が誘導される現象を自己誘導という。"}],"correct_option":"c","explanation":"コイルに流れる電流の変化を妨げる向きに発生する起電力（逆起電力）は、自己誘導によるものです。aは相互誘導、bは電磁誘導（自己誘導の一例）、dは相互誘導に近いです。"},
          {"id":"2.24","question":"2.24 コイルと永久磁石を近づけたり遠ざけたりするとコイルに電圧が発生する。この現象を何というか。","choices":[{"option":"a","text":"自己誘導"},{"option":"b","text":"相互誘導"},{"option":"c","text":"静電誘導"},{"option":"d","text":"電磁誘導"}],"correct_option":"d","explanation":"磁束の時間変化により起電力が誘導される現象を電磁誘導という。"},
          {"id":"2.25","question":"2.25 ファラデーの電磁誘導の法則によると、誘導起電力は何に比例するか。","choices":[{"option":"a","text":"コイルの抵抗"},{"option":"b","text":"磁束の時間変化率"},{"option":"c","text":"電流"},{"option":"d","text":"周波数の逆数"}],"correct_option":"b","explanation":"誘導起電力 E は磁束 Φ の時間変化率 dΦ/dt に比例する。"},
          {"id":"2.26","question":"2.26 コイルに鉄心を入れるとインダクタンスはどうなるか。","choices":[{"option":"a","text":"増加する"},{"option":"b","text":"減少する"},{"option":"c","text":"変化しない"},{"option":"d","text":"場合によって異なる"}],"correct_option":"a","explanation":"鉄心は透磁率が高く磁束を増大させるためインダクタンスが増加する。"},
          {"id":"2.27","question":"2.27 1 turn のコイルを 10 turn に巻き直した場合、インダクタンスは理論上何倍になるか。","choices":[{"option":"a","text":"10 倍"},{"option":"b","text":"20 倍"},{"option":"c","text":"100 倍"},{"option":"d","text":"1/10"}],"correct_option":"c","explanation":"インダクタンスは巻数の 2 乗に比例するため 10² = 100 倍。"},
          {"id":"2.28","question":"2.28 誘導性リアクタンス X_L の式として正しいものを選びなさい。","choices":[{"option":"a","text":"X_L = 2πfL"},{"option":"b","text":"X_L = 1/(2πfL)"},{"option":"c","text":"X_L = R/L"},{"option":"d","text":"X_L = L/R"}],"correct_option":"a","explanation":"誘導性リアクタンスは角周波数 ω=2πf とインダクタンス L の積。"},
          {"id":"2.29","question":"2.29 周波数が 0 Hz のとき、コイルのリアクタンス X_L はどうなるか。","choices":[{"option":"a","text":"0 Ω"},{"option":"b","text":"無限大"},{"option":"c","text":"-j Ω"},{"option":"d","text":"√2 Ω"}],"correct_option":"a","explanation":"直流(0 Hz) では X_L = 2πfL = 0 となる。"},
          {"id":"2.30","question":"2.30 コイルの Q 値は一般に何の指標か。","choices":[{"option":"a","text":"エネルギー損失係数"},{"option":"b","text":"共振鋭度"},{"option":"c","text":"透磁率"},{"option":"d","text":"磁束"}],"correct_option":"b","explanation":"Q 値はコイルの共振の鋭さを表す品質係数である。"},
          {"id":"2.31","question":"2.31 コイルとコンデンサを直列接続した回路が共振する条件はどれか。","choices":[{"option":"a","text":"X_L = X_C"},{"option":"b","text":"R = X_L"},{"option":"c","text":"R = X_C"},{"option":"d","text":"Z = 0"}],"correct_option":"a","explanation":"直列共振は誘導性リアクタンスと容量性リアクタンスが等しくなるときに生じる。"},
          {"id":"2.32","question":"2.32 コイルの銅損は主に何によって決まるか。","choices":[{"option":"a","text":"抵抗"},{"option":"b","text":"インダクタンス"},{"option":"c","text":"周波数"},{"option":"d","text":"巻数"}],"correct_option":"a","explanation":"銅損は I²R 損であり導線抵抗に比例する。"},
          {"id":"2.33","question":"2.33 コイルで発生する渦電流損失を低減する方法として適切なものはどれか。","choices":[{"option":"a","text":"太い銅線を使う"},{"option":"b","text":"鉄心をラミネートする"},{"option":"c","text":"巻数を増やす"},{"option":"d","text":"周波数を上げる"}],"correct_option":"b","explanation":"薄い鋼板を積層し絶縁することで鉄心内の渦電流経路を分断し損失を減らす。"},
          {"id":"2.34","question":"2.34 コイルの自己インダクタンス L の単位はどれか。","choices":[{"option":"a","text":"H (ヘンリー)"},{"option":"b","text":"T (テスラ)"},{"option":"c","text":"Ω (オーム)"},{"option":"d","text":"F (ファラド)"}],"correct_option":"a","explanation":"インダクタンスの国際単位はヘンリー (H)。"},
          {"id":"2.35","question":"2.35 コイルと抵抗を直列にした AC 回路で、電流が電圧より 45° 遅れている。このとき X_L と R の関係はどれか。","choices":[{"option":"a","text":"X_L = R"},{"option":"b","text":"X_L = 0"},{"option":"c","text":"X_L = 2R"},{"option":"d","text":"R = 2X_L"}],"correct_option":"a","explanation":"位相遅れが 45° のとき、tanθ = X_L / R = 1 より X_L = R。"},
          {"id":"2.36","question":"2.36 直列 R-L 回路のインピーダンス Z を表す式はどれか。","choices":[{"option":"a","text":"Z = R + jX_L"},{"option":"b","text":"Z = √(R² + X_L²)"},{"option":"c","text":"Z = X_L - R"},{"option":"d","text":"Z = R/X_L"}],"correct_option":"b","explanation":"実数 R と虚数 X_L の長さの平方根で与えられる。"},
          {"id":"2.37","question":"2.37 コア材のヒステリシス損失は周波数 f の何乗に比例するか。","choices":[{"option":"a","text":"f"},{"option":"b","text":"f²"},{"option":"c","text":"√f"},{"option":"d","text":"1/f"}],"correct_option":"a","explanation":"ヒステリシス損失は周波数に一次比例する。"},
          {"id":"2.38","question":"2.38 コイルのリアクタンス X_L が 10 Ω のとき、周波数を 2 倍にすると X_L はどうなるか。","choices":[{"option":"a","text":"5 Ω"},{"option":"b","text":"10 Ω"},{"option":"c","text":"20 Ω"},{"option":"d","text":"40 Ω"}],"correct_option":"c","explanation":"X_L は周波数に比例するため 2 倍になる。"},
          {"id":"2.39","question":"2.39 コイルのリアクタンスについて正しい記述を選べ。","choices":[{"option":"a","text":"インダクタンスとリアクタンスは逆数の関係にある。"},{"option":"b","text":"リアクタンスは周波数によらず一定である。"},{"option":"c","text":"直流ではリアクタンスは無限大となる。"},{"option":"d","text":"インダクタンスが一定のとき、リアクタンスは周波数に比例する。"}],"correct_option":"d","explanation":"コイルのリアクタンス Xₗ = 2πfL の式から、インダクタンスLが一定であれば、リアクタンスは周波数fに比例することがわかります。直流(f=0)ではリアクタンスは0になります。"},
          {"id":"2.40","question":"2.40 試験周波数10kHz、抵抗3.0Ω、インダクタンス63.7μHの試験コイルのインピーダンスに最も近い値を選べ。","choices":[{"option":"a","text":"2.6 Ω"},{"option":"b","text":"5 Ω"},{"option":"c","text":"16 Ω"},{"option":"d","text":"25 Ω"}],"correct_option":"b","explanation":"リアクタンス Xₗ = 2πfL = 2π(10×10³) (63.7×10⁻⁶) ≈ 4.0Ω。インピーダンス Z = √(3² + 4²) = √25 = 5Ω。"},
          {"id":"2.41","question":"2.41 コイルのインピーダンスについて正しい記述を選べ。","choices":[{"option":"a","text":"インピーダンスは抵抗とインダクタンスからなる。"},{"option":"b","text":"インピーダンスはインダクタンスとリアクタンスからなる。"},{"option":"c","text":"インピーダンスは抵抗とリアクタンスからなる。"},{"option":"d","text":"インピーダンスは抵抗とキャパシタンスからなる。"}],"correct_option":"c","explanation":"インピーダンスは、交流回路における総合的な抵抗であり、抵抗成分とリアクタンス成分（コイルの場合は誘導性リアクタンス）を合成したものです。"},
          {"id":"2.42","question":"2.42 抵抗RとリアクタンスXが直列に接続された回路のインピーダンスを表す式として正しいものを選べ。","choices":[{"option":"a","text":"R + X"},{"option":"b","text":"R² + X²"},{"option":"c","text":"√(R² + X²)"},{"option":"d","text":"√R + √X"}],"correct_option":"c","explanation":"インピーダンスZは、抵抗RとリアクタンスXを直角 2 辺とする直角三角形の斜辺の長さに相当するため、Z = √(R² + X²) で計算されます。"},
          {"id":"2.43","question":"2.43 コイルのインピーダンスに関する式として正しいものを選べ (R:抵抗, L:インダクタンス, Z:インピーダンス, θ:位相, ω:角周波数(ω=2πf))。","choices":[{"option":"a","text":"θ = tan⁻¹(ωL/R)"},{"option":"b","text":"tanθ = (R/ωL)"},{"option":"c","text":"Z = √R + ωL"},{"option":"d","text":"Z² = R² + ωL²"}],"correct_option":"a","explanation":"インピーダンスの位相角θはリアクタンス成分(ωL)と抵抗成分(R)の比の逆正接で与えられます。したがって、θ = tan⁻¹(ωL/R) となります。"},
          {"id":"2.44","question":"2.44 次の単位は電磁気に関する単位の記号を挙げたものであるが、リアクタンスの単位はどれか。正しいものを一つ選び、記号で答えなさい。","choices":[{"option":"a","text":"Ω"},{"option":"b","text":"A/m"},{"option":"c","text":"H"},{"option":"d","text":"T"}],"correct_option":"a","explanation":"リアクタンスは交流回路における抵抗の一種なので、単位は抵抗と同じΩ（オーム）です。"},
*/
    const letterIdx = ['a','b','c','d']; 

    const speakButton = document.getElementById('speak-button');
    const pauseButton = document.getElementById('pause-button');
    const choicesContainer = document.getElementById('choices-container');
    const explanationContainer = document.getElementById('explanation-container');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');
    const progressText = document.getElementById('progress-text');
    const questionText = document.getElementById('question-text');

    let currentChapter = 1;
    let filteredQuizData = quizData.filter(q => q.id.startsWith('1.'));
    let isAnswered = false;

    function loadQuestion(questionIndex) {
      const rawQ = filteredQuizData[questionIndex];
      // ユーザ提供データをそのまま使い、表示時に変換する
      let choices = Array.isArray(rawQ.choices)
        ? (typeof rawQ.choices[0] === 'string' ? rawQ.choices : rawQ.choices.map(c => c.text))
        : [];
      let correctIdx = (typeof rawQ.correct_option_index === 'number')
        ? rawQ.correct_option_index
        : letterIdx.indexOf((rawQ.correct_option || '').toLowerCase());
      if (correctIdx < 0) correctIdx = 0;
      // 次回アクセス用に正規化済み情報を保存
      rawQ.choices = choices;
      rawQ.correct_option_index = correctIdx;
      const q = rawQ;
      currentQuestion = questionIndex;
      isAnswered = false;
      // 進捗表示
      progressText.textContent = `第${currentChapter}章：問題 ${questionIndex + 1} / ${filteredQuizData.length}`;
      // 問題文
      questionText.textContent = q.question;
      // 選択肢
      choicesContainer.innerHTML = '';
      q.choices.forEach((choice, idx) => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.textContent = choice;
        btn.disabled = false;
        btn.onclick = () => handleChoice(idx, btn);
        choicesContainer.appendChild(btn);
      });
      // 解説
      explanationContainer.textContent = '';
      explanationContainer.classList.remove('visible');
      explanationContainer.style.display = 'none';
      // ボタン色リセット
      Array.from(choicesContainer.children).forEach(btn => {
        btn.classList.remove('correct', 'incorrect');
      });
    }

    function handleChoice(idx, btn) {
      if (isAnswered) return;
      isAnswered = true;
      const q = filteredQuizData[currentQuestion];
      // 全選択肢を無効化
      Array.from(choicesContainer.children).forEach((b, i) => {
        b.disabled = true;
        if (i === q.correct_option_index) {
          b.classList.add('correct');
        }
      });
      // 不正解なら赤色
      if (idx !== q.correct_option_index) {
        btn.classList.add('incorrect');
      }
      // 解説表示
      explanationContainer.textContent = q.explanation;
      explanationContainer.style.display = 'block';
      setTimeout(() => {
        explanationContainer.classList.add('visible');
      }, 50);
    }

    prevButton.addEventListener('click', () => {
      let idx = currentQuestion - 1;
      if (idx < 0) idx = filteredQuizData.length - 1;
      loadQuestion(idx);
    });
    nextButton.addEventListener('click', () => {
      let idx = currentQuestion + 1;
      if (idx >= filteredQuizData.length) idx = 0;
      loadQuestion(idx);
    });

    // 一時停止・再開状態
    let isPaused = false;

    speakButton.addEventListener('click', () => {
      window.speechSynthesis.cancel(); // 前回の読み上げ停止
      const q = filteredQuizData[currentQuestion];
      const utterances = [];
      // 問題文
      const qUtter = new window.SpeechSynthesisUtterance(q.question);
      qUtter.lang = 'ja-JP';
      qUtter.rate = 0.9;
      utterances.push(qUtter);
      // 選択肢
      q.choices.forEach((choice, i) => {
        const choiceUtter = new window.SpeechSynthesisUtterance(`${i+1}、${choice}`);
        choiceUtter.lang = 'ja-JP';
        choiceUtter.rate = 0.9;
        utterances.push(choiceUtter);
      });
      // 読み上げ実行
      let idx = 0;
      function speakNext() {
        if (idx < utterances.length) {
          window.speechSynthesis.speak(utterances[idx]);
          utterances[idx].onend = () => {
            idx++;
            speakNext();
          };
        } else {
          // 数秒後に正解と解説を読み上げ
          setTimeout(() => {
            // 正解
            const ansText = `正解は、選択肢${q.correct_option_index+1}。${q.choices[q.correct_option_index]}`;
            const ansUtter = new window.SpeechSynthesisUtterance(ansText);
            ansUtter.lang = 'ja-JP';
            ansUtter.rate = 0.9;
            // 解説
            const expUtter = new window.SpeechSynthesisUtterance(q.explanation);
            expUtter.lang = 'ja-JP';
            expUtter.rate = 0.9;
            window.speechSynthesis.speak(ansUtter);
            ansUtter.onend = () => {
              window.speechSynthesis.speak(expUtter);
              expUtter.onend = () => {
                // 解説の読み上げが終わったら自動で次の問題へ
                let nextIdx = currentQuestion + 1;
                if (nextIdx >= filteredQuizData.length) nextIdx = 0;
                loadQuestion(nextIdx);
                // すぐ次の問題の読み上げを自動開始
                setTimeout(() => {
                  speakButton.click();
                }, 400); // 0.4秒だけ間を空ける
              };
            };

          }, 2500);
        }
      }
      speakNext();
    });

    // 一時停止ボタン
    pauseButton.addEventListener('click', () => {
      if (!window.speechSynthesis.speaking) return;
      if (isPaused) {
        window.speechSynthesis.resume();
        isPaused = false;
        pauseButton.innerHTML = '<span aria-label="一時停止">⏸️</span>';
        pauseButton.title = '一時停止';
      } else {
        window.speechSynthesis.pause();
        isPaused = true;
        pauseButton.innerHTML = '<span aria-label="再開">▶️</span>';
        pauseButton.title = '再開';
      }
    });

    // 初期化
    window.addEventListener('DOMContentLoaded', () => {
      loadQuestion(0);
      // 章切替ボタンのイベント設定
      document.getElementById('chapter1-btn').addEventListener('click', () => {
        currentChapter = 1;
        filteredQuizData = quizData.filter(q => q.id.startsWith('1.'));
        loadQuestion(0);
      });
      document.getElementById('chapter2-btn').addEventListener('click', () => {
        currentChapter = 2;
        filteredQuizData = quizData.filter(q => q.id.startsWith('2.'));
        loadQuestion(0);
      });
      document.getElementById('chapter3-btn').addEventListener('click', () => {
        currentChapter = 3;
        filteredQuizData = quizData.filter(q => q.id.startsWith('3.'));
        loadQuestion(0);
      });
    });
  </script>
</body>
</html>
